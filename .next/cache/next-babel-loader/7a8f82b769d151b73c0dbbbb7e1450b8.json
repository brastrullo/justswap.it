{"ast":null,"code":"import axios from 'axios';\nimport { catchError } from './utils';\nexport const getUserAccess = (obj, setFn) => {\n  const dataTransformer = data => {\n    return {\n      email: data.user,\n      password: data.pass\n    };\n  };\n\n  const transformedData = dataTransformer(obj);\n\n  const createToken = async () => {\n    return await axios.post('http://localhost:8000/api/auth/jwt/create', transformedData).then(function (response) {\n      return response.data;\n    }).catch(catchError);\n  };\n\n  const getUserInfo = async token => {\n    return await axios.get('http://localhost:8000/api/auth/users/me', {\n      params: transformedData,\n      headers: {\n        Authorization: `Bearer ${token.access}`\n      }\n    }).then(function (response) {\n      return response.data;\n    }).catch(catchError);\n  };\n\n  createToken().then(token => getUserInfo(token)).then(user => {\n    setFn(user);\n  });\n};\nexport const postNewUser = obj => {\n  const dataTransformer = data => {\n    return {\n      username: data.username,\n      email: data.email,\n      password: data.password\n    };\n  };\n\n  const transformedData = dataTransformer(obj);\n  return axios.post('http://localhost:8000/api/auth/users/', transformedData).then(function (response) {\n    console.log(response);\n  }).catch(catchError);\n};","map":{"version":3,"sources":["/Users/bradras/Projects/justswap.it/utils/asyncActions.ts"],"names":["axios","catchError","getUserAccess","obj","setFn","dataTransformer","data","email","user","password","pass","transformedData","createToken","post","then","response","catch","getUserInfo","token","get","params","headers","Authorization","access","postNewUser","username","console","log"],"mappings":"AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,SAASC,UAAT,QAA2B,SAA3B;AAEA,OAAO,MAAMC,aAAa,GAAG,CAACC,GAAD,EAAMC,KAAN,KAAgB;AAC3C,QAAMC,eAAe,GAAIC,IAAD,IAAU;AAChC,WAAQ;AACNC,MAAAA,KAAK,EAAED,IAAI,CAACE,IADN;AAENC,MAAAA,QAAQ,EAAEH,IAAI,CAACI;AAFT,KAAR;AAID,GALD;;AAOA,QAAMC,eAAe,GAAGN,eAAe,CAACF,GAAD,CAAvC;;AAEA,QAAMS,WAAW,GAAG,YAAY;AAC9B,WAAO,MAAMZ,KAAK,CAACa,IAAN,CAAW,2CAAX,EAAwDF,eAAxD,EACZG,IADY,CACP,UAAUC,QAAV,EAAoB;AACxB,aAAOA,QAAQ,CAACT,IAAhB;AACD,KAHY,EAIZU,KAJY,CAINf,UAJM,CAAb;AAKD,GAND;;AAQA,QAAMgB,WAAW,GAAG,MAAOC,KAAP,IAAiB;AACnC,WAAO,MAAMlB,KAAK,CAACmB,GAAN,CAAU,yCAAV,EAAqD;AAChEC,MAAAA,MAAM,EAAET,eADwD;AAEhEU,MAAAA,OAAO,EAAE;AACPC,QAAAA,aAAa,EAAG,UAASJ,KAAK,CAACK,MAAO;AAD/B;AAFuD,KAArD,EAMZT,IANY,CAMP,UAAUC,QAAV,EAAoB;AACxB,aAAOA,QAAQ,CAACT,IAAhB;AACD,KARY,EASZU,KATY,CASNf,UATM,CAAb;AAUD,GAXD;;AAYAW,EAAAA,WAAW,GACVE,IADD,CACMI,KAAK,IAAID,WAAW,CAACC,KAAD,CAD1B,EAECJ,IAFD,CAEMN,IAAI,IAAI;AACZJ,IAAAA,KAAK,CAACI,IAAD,CAAL;AACD,GAJD;AAKD,CAnCM;AAqCP,OAAO,MAAMgB,WAAW,GAAIrB,GAAD,IAAS;AAClC,QAAME,eAAe,GAAIC,IAAD,IAAU;AAChC,WAAQ;AACNmB,MAAAA,QAAQ,EAAEnB,IAAI,CAACmB,QADT;AAENlB,MAAAA,KAAK,EAAED,IAAI,CAACC,KAFN;AAGNE,MAAAA,QAAQ,EAAEH,IAAI,CAACG;AAHT,KAAR;AAKD,GAND;;AAQA,QAAME,eAAe,GAAGN,eAAe,CAACF,GAAD,CAAvC;AACA,SAAOH,KAAK,CAACa,IAAN,CAAW,uCAAX,EAAoDF,eAApD,EACNG,IADM,CACD,UAAUC,QAAV,EAAoB;AACxBW,IAAAA,OAAO,CAACC,GAAR,CAAYZ,QAAZ;AACD,GAHM,EAINC,KAJM,CAIAf,UAJA,CAAP;AAKD,CAfM","sourcesContent":["import axios from 'axios'\nimport { catchError } from './utils'\n\nexport const getUserAccess = (obj, setFn) => {\n  const dataTransformer = (data) => {\n    return ({\n      email: data.user,\n      password: data.pass\n    })\n  }\n\n  const transformedData = dataTransformer(obj)\n\n  const createToken = async () => {\n    return await axios.post('http://localhost:8000/api/auth/jwt/create', transformedData)\n    .then(function (response) {\n      return response.data\n    })\n    .catch(catchError);\n  }\n\n  const getUserInfo = async (token) => {\n    return await axios.get('http://localhost:8000/api/auth/users/me', {\n      params: transformedData,\n      headers: {\n        Authorization: `Bearer ${token.access}`\n      }\n    })\n    .then(function (response) {\n      return response.data\n    })\n    .catch(catchError);\n  }\n  createToken()\n  .then(token => getUserInfo(token))\n  .then(user => {\n    setFn(user)\n  })\n}\n\nexport const postNewUser = (obj) => {\n  const dataTransformer = (data) => {\n    return ({\n      username: data.username,\n      email: data.email,\n      password: data.password\n    })\n  }\n\n  const transformedData = dataTransformer(obj)\n  return axios.post('http://localhost:8000/api/auth/users/', transformedData)\n  .then(function (response) {\n    console.log(response);\n  })\n  .catch(catchError);\n}"]},"metadata":{},"sourceType":"module"}