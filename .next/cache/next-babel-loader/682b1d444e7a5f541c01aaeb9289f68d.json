{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport axios from 'axios';\nimport { catchError } from './utils';\nexport var getUserAccess = function getUserAccess(obj, setFn) {\n  var dataTransformer = function dataTransformer(data) {\n    return {\n      email: data.user,\n      password: data.pass\n    };\n  };\n\n  var transformedData = dataTransformer(obj);\n\n  var createToken = function createToken() {\n    return _regeneratorRuntime.async(function createToken$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            _context.next = 2;\n            return _regeneratorRuntime.awrap(axios.post('http://localhost:8000/api/auth/jwt/create', transformedData).then(function (response) {\n              return response.data;\n            })[\"catch\"](catchError));\n\n          case 2:\n            return _context.abrupt(\"return\", _context.sent);\n\n          case 3:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  };\n\n  var getUserInfo = function getUserInfo(token) {\n    return _regeneratorRuntime.async(function getUserInfo$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            _context2.next = 2;\n            return _regeneratorRuntime.awrap(axios.get('http://localhost:8000/api/auth/users/me', {\n              params: transformedData,\n              headers: {\n                Authorization: \"Bearer \".concat(token.access)\n              }\n            }).then(function (response) {\n              return response.data;\n            })[\"catch\"](catchError));\n\n          case 2:\n            return _context2.abrupt(\"return\", _context2.sent);\n\n          case 3:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  };\n\n  createToken().then(function (token) {\n    return getUserInfo(token);\n  }).then(function (user) {\n    setFn(user);\n  });\n};\nexport var postNewUser = function postNewUser(obj) {\n  var dataTransformer = function dataTransformer(data) {\n    return {\n      username: data.username,\n      email: data.email,\n      password: data.password\n    };\n  };\n\n  var transformedData = dataTransformer(obj);\n  axios.post('http://localhost:8000/api/auth/users/', transformedData).then(function (response) {\n    console.log(response);\n  })[\"catch\"](catchError);\n};","map":{"version":3,"sources":["/Users/bradras/Projects/justswap.it/utils/asyncActions.ts"],"names":["axios","catchError","getUserAccess","obj","setFn","dataTransformer","data","email","user","password","pass","transformedData","createToken","post","then","response","getUserInfo","token","get","params","headers","Authorization","access","postNewUser","username","console","log"],"mappings":";AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,SAASC,UAAT,QAA2B,SAA3B;AAEA,OAAO,IAAMC,aAAa,GAAG,SAAhBA,aAAgB,CAACC,GAAD,EAAMC,KAAN,EAAgB;AAC3C,MAAMC,eAAe,GAAG,SAAlBA,eAAkB,CAACC,IAAD,EAAU;AAChC,WAAQ;AACNC,MAAAA,KAAK,EAAED,IAAI,CAACE,IADN;AAENC,MAAAA,QAAQ,EAAEH,IAAI,CAACI;AAFT,KAAR;AAID,GALD;;AAOA,MAAMC,eAAe,GAAGN,eAAe,CAACF,GAAD,CAAvC;;AAEA,MAAMS,WAAW,GAAG,SAAdA,WAAc;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,6CACLZ,KAAK,CAACa,IAAN,CAAW,2CAAX,EAAwDF,eAAxD,EACZG,IADY,CACP,UAAUC,QAAV,EAAoB;AACxB,qBAAOA,QAAQ,CAACT,IAAhB;AACD,aAHY,WAINL,UAJM,CADK;;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAApB;;AAQA,MAAMe,WAAW,GAAG,SAAdA,WAAc,CAAOC,KAAP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,6CACLjB,KAAK,CAACkB,GAAN,CAAU,yCAAV,EAAqD;AAChEC,cAAAA,MAAM,EAAER,eADwD;AAEhES,cAAAA,OAAO,EAAE;AACPC,gBAAAA,aAAa,mBAAYJ,KAAK,CAACK,MAAlB;AADN;AAFuD,aAArD,EAMZR,IANY,CAMP,UAAUC,QAAV,EAAoB;AACxB,qBAAOA,QAAQ,CAACT,IAAhB;AACD,aARY,WASNL,UATM,CADK;;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAApB;;AAYAW,EAAAA,WAAW,GACVE,IADD,CACM,UAAAG,KAAK;AAAA,WAAID,WAAW,CAACC,KAAD,CAAf;AAAA,GADX,EAECH,IAFD,CAEM,UAAAN,IAAI,EAAI;AACZJ,IAAAA,KAAK,CAACI,IAAD,CAAL;AACD,GAJD;AAKD,CAnCM;AAqCP,OAAO,IAAMe,WAAW,GAAG,SAAdA,WAAc,CAACpB,GAAD,EAAS;AAClC,MAAME,eAAe,GAAG,SAAlBA,eAAkB,CAACC,IAAD,EAAU;AAChC,WAAQ;AACNkB,MAAAA,QAAQ,EAAElB,IAAI,CAACkB,QADT;AAENjB,MAAAA,KAAK,EAAED,IAAI,CAACC,KAFN;AAGNE,MAAAA,QAAQ,EAAEH,IAAI,CAACG;AAHT,KAAR;AAKD,GAND;;AAQA,MAAME,eAAe,GAAGN,eAAe,CAACF,GAAD,CAAvC;AACAH,EAAAA,KAAK,CAACa,IAAN,CAAW,uCAAX,EAAoDF,eAApD,EACCG,IADD,CACM,UAAUC,QAAV,EAAoB;AACxBU,IAAAA,OAAO,CAACC,GAAR,CAAYX,QAAZ;AACD,GAHD,WAIOd,UAJP;AAKD,CAfM","sourcesContent":["import axios from 'axios'\nimport { catchError } from './utils'\n\nexport const getUserAccess = (obj, setFn) => {\n  const dataTransformer = (data) => {\n    return ({\n      email: data.user,\n      password: data.pass\n    })\n  }\n\n  const transformedData = dataTransformer(obj)\n\n  const createToken = async () => {\n    return await axios.post('http://localhost:8000/api/auth/jwt/create', transformedData)\n    .then(function (response) {\n      return response.data\n    })\n    .catch(catchError);\n  }\n\n  const getUserInfo = async (token) => {\n    return await axios.get('http://localhost:8000/api/auth/users/me', {\n      params: transformedData,\n      headers: {\n        Authorization: `Bearer ${token.access}`\n      }\n    })\n    .then(function (response) {\n      return response.data\n    })\n    .catch(catchError);\n  }\n  createToken()\n  .then(token => getUserInfo(token))\n  .then(user => {\n    setFn(user)\n  })\n}\n\nexport const postNewUser = (obj) => {\n  const dataTransformer = (data) => {\n    return ({\n      username: data.username,\n      email: data.email,\n      password: data.password\n    })\n  }\n\n  const transformedData = dataTransformer(obj)\n  axios.post('http://localhost:8000/api/auth/users/', transformedData)\n  .then(function (response) {\n    console.log(response);\n  })\n  .catch(catchError);\n}"]},"metadata":{},"sourceType":"module"}