{"ast":null,"code":"import axios from 'axios';\nimport { catchError } from './utils';\nexport const getUserAccess = obj => {\n  const dataTransformer = data => {\n    return {\n      email: data.user,\n      password: data.pass\n    };\n  };\n\n  const transformedData = dataTransformer(obj);\n\n  const createToken = async () => {\n    return await axios.post('http://localhost:8000/api/auth/jwt/create', transformedData).then(function (response) {\n      return response.data;\n    }).catch(catchError);\n  };\n\n  const getUserInfo = async token => {\n    return await axios.get('http://localhost:8000/api/auth/users/me', {\n      params: transformedData,\n      headers: {\n        Authorization: `Bearer ${token.access}`\n      }\n    }).then(function (response) {\n      return response.data;\n    }).catch(catchError);\n  };\n\n  return createToken().then(token => getUserInfo(token)).then(user => {\n    return user;\n  });\n};\nexport const postNewUser = obj => {\n  console.log('Received', {\n    obj\n  });\n\n  const dataTransformer = data => {\n    return {\n      username: data.username,\n      email: data.email,\n      password: data.password\n    };\n  };\n\n  const transformedData = dataTransformer(obj);\n  return axios.post('http://localhost:8000/api/auth/users/', transformedData).then(function (response) {\n    console.log(response);\n  }).catch(catchError);\n};","map":{"version":3,"sources":["/Users/bradras/Projects/justswap.it/utils/asyncActions.ts"],"names":["axios","catchError","getUserAccess","obj","dataTransformer","data","email","user","password","pass","transformedData","createToken","post","then","response","catch","getUserInfo","token","get","params","headers","Authorization","access","postNewUser","console","log","username"],"mappings":"AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,SAASC,UAAT,QAA2B,SAA3B;AAEA,OAAO,MAAMC,aAAa,GAAIC,GAAD,IAAS;AACpC,QAAMC,eAAe,GAAIC,IAAD,IAAU;AAChC,WAAQ;AACNC,MAAAA,KAAK,EAAED,IAAI,CAACE,IADN;AAENC,MAAAA,QAAQ,EAAEH,IAAI,CAACI;AAFT,KAAR;AAID,GALD;;AAOA,QAAMC,eAAe,GAAGN,eAAe,CAACD,GAAD,CAAvC;;AAEA,QAAMQ,WAAW,GAAG,YAAY;AAC9B,WAAO,MAAMX,KAAK,CAACY,IAAN,CAAW,2CAAX,EAAwDF,eAAxD,EACZG,IADY,CACP,UAAUC,QAAV,EAAoB;AACxB,aAAOA,QAAQ,CAACT,IAAhB;AACD,KAHY,EAIZU,KAJY,CAINd,UAJM,CAAb;AAKD,GAND;;AAQA,QAAMe,WAAW,GAAG,MAAOC,KAAP,IAAiB;AACnC,WAAO,MAAMjB,KAAK,CAACkB,GAAN,CAAU,yCAAV,EAAqD;AAChEC,MAAAA,MAAM,EAAET,eADwD;AAEhEU,MAAAA,OAAO,EAAE;AACPC,QAAAA,aAAa,EAAG,UAASJ,KAAK,CAACK,MAAO;AAD/B;AAFuD,KAArD,EAMZT,IANY,CAMP,UAAUC,QAAV,EAAoB;AACxB,aAAOA,QAAQ,CAACT,IAAhB;AACD,KARY,EASZU,KATY,CASNd,UATM,CAAb;AAUD,GAXD;;AAYA,SAAOU,WAAW,GACjBE,IADM,CACDI,KAAK,IAAID,WAAW,CAACC,KAAD,CADnB,EAENJ,IAFM,CAEDN,IAAI,IAAI;AACZ,WAAOA,IAAP;AACD,GAJM,CAAP;AAKD,CAnCM;AAqCP,OAAO,MAAMgB,WAAW,GAAIpB,GAAD,IAAS;AAClCqB,EAAAA,OAAO,CAACC,GAAR,CAAY,UAAZ,EAAwB;AAACtB,IAAAA;AAAD,GAAxB;;AACA,QAAMC,eAAe,GAAIC,IAAD,IAAU;AAChC,WAAQ;AACNqB,MAAAA,QAAQ,EAAErB,IAAI,CAACqB,QADT;AAENpB,MAAAA,KAAK,EAAED,IAAI,CAACC,KAFN;AAGNE,MAAAA,QAAQ,EAAEH,IAAI,CAACG;AAHT,KAAR;AAKD,GAND;;AAQA,QAAME,eAAe,GAAGN,eAAe,CAACD,GAAD,CAAvC;AACA,SAAOH,KAAK,CAACY,IAAN,CAAW,uCAAX,EAAoDF,eAApD,EACNG,IADM,CACD,UAAUC,QAAV,EAAoB;AACxBU,IAAAA,OAAO,CAACC,GAAR,CAAYX,QAAZ;AACD,GAHM,EAINC,KAJM,CAIAd,UAJA,CAAP;AAKD,CAhBM","sourcesContent":["import axios from 'axios'\nimport { catchError } from './utils'\n\nexport const getUserAccess = (obj) => {\n  const dataTransformer = (data) => {\n    return ({\n      email: data.user,\n      password: data.pass\n    })\n  }\n\n  const transformedData = dataTransformer(obj)\n\n  const createToken = async () => {\n    return await axios.post('http://localhost:8000/api/auth/jwt/create', transformedData)\n    .then(function (response) {\n      return response.data\n    })\n    .catch(catchError);\n  }\n\n  const getUserInfo = async (token) => {\n    return await axios.get('http://localhost:8000/api/auth/users/me', {\n      params: transformedData,\n      headers: {\n        Authorization: `Bearer ${token.access}`\n      }\n    })\n    .then(function (response) {\n      return response.data\n    })\n    .catch(catchError);\n  }\n  return createToken()\n  .then(token => getUserInfo(token))\n  .then(user => {\n    return user\n  })\n}\n\nexport const postNewUser = (obj) => {\n  console.log('Received', {obj})\n  const dataTransformer = (data) => {\n    return ({\n      username: data.username,\n      email: data.email,\n      password: data.password\n    })\n  }\n\n  const transformedData = dataTransformer(obj)\n  return axios.post('http://localhost:8000/api/auth/users/', transformedData)\n  .then(function (response) {\n    console.log(response);\n  })\n  .catch(catchError);\n}"]},"metadata":{},"sourceType":"module"}