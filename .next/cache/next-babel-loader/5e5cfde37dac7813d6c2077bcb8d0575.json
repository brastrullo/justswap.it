{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\n\nvar _reducers;\n\nimport { useDispatch } from 'react-redux';\nimport { createAsyncThunk, createSlice, createAction } from '@reduxjs/toolkit';\nimport { getUserAccess, postNewUser } from '../utils/asyncActions'; // TYPESCRIPT BUILDER API EXAMPLE\n// createReducer(0, builder =>\n//   builder.addCase(increment, (state, action) => {\n//     // action is inferred correctly here\n//   })\n// )\n\nfunction withPayloadType() {\n  return function (t) {\n    return {\n      payload: t\n    };\n  };\n}\n\nvar dispatch = useDispatch();\nvar usersLoading = createAction('users/loading');\nvar usersReceived = createAction('users/received');\nvar logUsers = createAction('users/log');\nvar setCurrentUser = createAction('users/setUser', withPayloadType());\nvar usersSlice = createSlice({\n  name: 'users',\n  initialState: {\n    loading: 'idle',\n    currentUser: {},\n    usersArray: []\n  },\n  reducers: (_reducers = {}, _defineProperty(_reducers, setCurrentUser.type, function (state, action) {\n    state.currentUser = action.payload;\n    console.log(state.currentUser);\n    return state;\n  }), _defineProperty(_reducers, usersLoading.type, function (state, action) {\n    if (state.loading === 'idle') {\n      state.loading = 'pending';\n    }\n  }), _defineProperty(_reducers, usersReceived.type, function (state, action) {\n    if (state.loading === 'pending') {\n      state.loading = 'idle';\n      state.usersArray = action.payload;\n    }\n  }), _defineProperty(_reducers, logUsers.type, function (state, action) {\n    console.log('Log Users:', state.usersArray);\n    return state;\n  }), _reducers) // extraReducers: {\n  //   [registerUser.fulfilled]: (state, action) => {\n  //   }\n  // }\n\n});\nexport var registerUser = createAsyncThunk('users/createUser', function _callee(obj) {\n  return _regeneratorRuntime.async(function _callee$(_context) {\n    while (1) {\n      switch (_context.prev = _context.next) {\n        case 0:\n          _context.next = 2;\n          return _regeneratorRuntime.awrap(postNewUser(obj));\n\n        case 2:\n          return _context.abrupt(\"return\", _context.sent);\n\n        case 3:\n        case \"end\":\n          return _context.stop();\n      }\n    }\n  }, null, null, null, Promise);\n});\nexport var loginUser = createAsyncThunk('users/login', function _callee2(obj) {\n  return _regeneratorRuntime.async(function _callee2$(_context2) {\n    while (1) {\n      switch (_context2.prev = _context2.next) {\n        case 0:\n          _context2.next = 2;\n          return _regeneratorRuntime.awrap(getUserAccess(obj).then(function (user) {\n            return dispatch(setCurrentUser(user));\n          }));\n\n        case 2:\n          return _context2.abrupt(\"return\", _context2.sent);\n\n        case 3:\n        case \"end\":\n          return _context2.stop();\n      }\n    }\n  }, null, null, null, Promise);\n});\nvar actions = usersSlice.actions,\n    reducer = usersSlice.reducer;\nexport default reducer;","map":{"version":3,"sources":["/Users/bradras/Projects/justswap.it/reducers/usersSlice.ts"],"names":["useDispatch","createAsyncThunk","createSlice","createAction","getUserAccess","postNewUser","withPayloadType","t","payload","dispatch","usersLoading","usersReceived","logUsers","setCurrentUser","usersSlice","name","initialState","loading","currentUser","usersArray","reducers","type","state","action","console","log","registerUser","obj","loginUser","then","user","actions","reducer"],"mappings":";;;;;AAAA,SAASA,WAAT,QAA4B,aAA5B;AACA,SACEC,gBADF,EAEEC,WAFF,EAGEC,YAHF,QAIO,kBAJP;AAKA,SAASC,aAAT,EAAwBC,WAAxB,QAA2C,uBAA3C,C,CAEA;AACA;AACA;AACA;AACA;AACA;;AAaA,SAASC,eAAT,GAA8B;AAC5B,SAAO,UAACC,CAAD;AAAA,WAAW;AAAEC,MAAAA,OAAO,EAAED;AAAX,KAAX;AAAA,GAAP;AACD;;AAED,IAAME,QAAQ,GAAGT,WAAW,EAA5B;AAEA,IAAMU,YAAY,GAAGP,YAAY,CAAC,eAAD,CAAjC;AACA,IAAMQ,aAAa,GAAGR,YAAY,CAA2B,gBAA3B,CAAlC;AACA,IAAMS,QAAQ,GAAGT,YAAY,CAAC,WAAD,CAA7B;AACA,IAAMU,cAAc,GAAIV,YAAY,CAAC,eAAD,EAAkBG,eAAe,EAAjC,CAApC;AAEA,IAAMQ,UAAU,GAAGZ,WAAW,CAAC;AAC7Ba,EAAAA,IAAI,EAAE,OADuB;AAE7BC,EAAAA,YAAY,EAAE;AACZC,IAAAA,OAAO,EAAE,MADG;AAEZC,IAAAA,WAAW,EAAE,EAFD;AAGZC,IAAAA,UAAU,EAAE;AAHA,GAFe;AAO7BC,EAAAA,QAAQ,8CACLP,cAAc,CAACQ,IADV,EACiB,UAACC,KAAD,EAAQC,MAAR,EAAmB;AACxCD,IAAAA,KAAK,CAACJ,WAAN,GAAoBK,MAAM,CAACf,OAA3B;AACAgB,IAAAA,OAAO,CAACC,GAAR,CAAYH,KAAK,CAACJ,WAAlB;AACA,WAAOI,KAAP;AACD,GALK,8BAMLZ,YAAY,CAACW,IANR,EAMgB,UAACC,KAAD,EAAQC,MAAR,EAAmB;AACvC,QAAID,KAAK,CAACL,OAAN,KAAkB,MAAtB,EAA8B;AAC5BK,MAAAA,KAAK,CAACL,OAAN,GAAgB,SAAhB;AACD;AACF,GAVK,8BAWLN,aAAa,CAACU,IAXT,EAWiB,UAACC,KAAD,EAAQC,MAAR,EAAmB;AACxC,QAAID,KAAK,CAACL,OAAN,KAAkB,SAAtB,EAAiC;AAC/BK,MAAAA,KAAK,CAACL,OAAN,GAAgB,MAAhB;AACAK,MAAAA,KAAK,CAACH,UAAN,GAAmBI,MAAM,CAACf,OAA1B;AACD;AACF,GAhBK,8BAiBLI,QAAQ,CAACS,IAjBJ,EAiBY,UAACC,KAAD,EAAQC,MAAR,EAAmB;AACnCC,IAAAA,OAAO,CAACC,GAAR,CAAY,YAAZ,EAA0BH,KAAK,CAACH,UAAhC;AACA,WAAOG,KAAP;AACD,GApBK,aAPqB,CA6B7B;AACA;AAEA;AACA;;AAjC6B,CAAD,CAA9B;AAoCA,OAAO,IAAMI,YAAY,GAAGzB,gBAAgB,CAAC,kBAAD,EAAqB,iBAAO0B,GAAP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,2CAClDtB,WAAW,CAACsB,GAAD,CADuC;;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,CAArB,CAArC;AAIP,OAAO,IAAMC,SAAS,GAAG3B,gBAAgB,CAAC,aAAD,EAAgB,kBAAO0B,GAAP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,2CAC1CvB,aAAa,CAACuB,GAAD,CAAb,CACVE,IADU,CACL,UAAAC,IAAI;AAAA,mBAAIrB,QAAQ,CAACI,cAAc,CAACiB,IAAD,CAAf,CAAZ;AAAA,WADC,CAD0C;;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,CAAhB,CAAlC;IAKCC,O,GAAqBjB,U,CAArBiB,O;IAASC,O,GAAYlB,U,CAAZkB,O;AACjB,eAAeA,OAAf","sourcesContent":["import { useDispatch } from 'react-redux'\nimport {\n  createAsyncThunk,\n  createSlice,\n  createAction\n} from '@reduxjs/toolkit'\nimport { getUserAccess, postNewUser } from '../utils/asyncActions'\n\n// TYPESCRIPT BUILDER API EXAMPLE\n// createReducer(0, builder =>\n//   builder.addCase(increment, (state, action) => {\n//     // action is inferred correctly here\n//   })\n// )\n\nexport type RegistrationObj = {\n  username: string,\n  email: string,\n  password: string\n}\n\nexport type LoginObj = {\n  user: string,\n  pass: string\n}\n\nfunction withPayloadType<T>() {\n  return (t: T) => ({ payload: t })\n}\n\nconst dispatch = useDispatch()\n\nconst usersLoading = createAction('users/loading')\nconst usersReceived = createAction<string, 'users/received'>('users/received')\nconst logUsers = createAction('users/log')\nconst setCurrentUser =  createAction('users/setUser', withPayloadType<LoginObj>())\n\nconst usersSlice = createSlice({\n  name: 'users',\n  initialState: {\n    loading: 'idle',\n    currentUser: {},\n    usersArray: []\n  },\n  reducers: {\n    [setCurrentUser.type]: (state, action) => {\n      state.currentUser = action.payload\n      console.log(state.currentUser)\n      return state\n    },\n    [usersLoading.type] : (state, action) => {\n      if (state.loading === 'idle') {\n        state.loading = 'pending'\n      }\n    },\n    [usersReceived.type] : (state, action) => {\n      if (state.loading === 'pending') {\n        state.loading = 'idle'\n        state.usersArray = action.payload\n      }\n    },\n    [logUsers.type] : (state, action) => {\n      console.log('Log Users:', state.usersArray)\n      return state\n    }\n  },\n  // extraReducers: {\n  //   [registerUser.fulfilled]: (state, action) => {\n\n  //   }\n  // }\n})\n\nexport const registerUser = createAsyncThunk('users/createUser', async (obj: RegistrationObj) => {\n  return await postNewUser(obj)\n})\n\nexport const loginUser = createAsyncThunk('users/login', async (obj: LoginObj) => {\n  return await getUserAccess(obj)\n    .then(user => dispatch(setCurrentUser(user)))\n})\n\nconst { actions, reducer } = usersSlice\nexport default reducer"]},"metadata":{},"sourceType":"module"}