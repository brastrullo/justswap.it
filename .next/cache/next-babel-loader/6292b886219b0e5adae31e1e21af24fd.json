{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport axios from 'axios';\nimport { catchError } from './utils';\nexport var getUserAccess = function getUserAccess(obj) {\n  var dataTransformer = function dataTransformer(data) {\n    return {\n      email: data.user,\n      password: data.pass\n    };\n  };\n\n  var transformedData = dataTransformer(obj);\n\n  var createToken = function createToken() {\n    return _regeneratorRuntime.async(function createToken$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            _context.next = 2;\n            return _regeneratorRuntime.awrap(axios.post('http://localhost:8000/api/auth/jwt/create', transformedData).then(function (response) {\n              return response.data;\n            })[\"catch\"](catchError));\n\n          case 2:\n            return _context.abrupt(\"return\", _context.sent);\n\n          case 3:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  };\n\n  var getUserInfo = function getUserInfo(token) {\n    return _regeneratorRuntime.async(function getUserInfo$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            console.log({\n              token: token\n            });\n            _context2.next = 3;\n            return _regeneratorRuntime.awrap(axios.get('http://localhost:8000/api/auth/users/me', {\n              params: transformedData,\n              headers: {\n                Authorization: \"Bearer \".concat(token.access)\n              }\n            }).then(function (response) {\n              return response.data;\n            })[\"catch\"](catchError));\n\n          case 3:\n            return _context2.abrupt(\"return\", _context2.sent);\n\n          case 4:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  };\n\n  createToken().then(function (token) {\n    return getUserInfo(token);\n  }).then(function (user) {\n    return user;\n  });\n};\nexport var postNewUser = function postNewUser(obj) {\n  console.log('Received', {\n    obj: obj\n  });\n\n  var dataTransformer = function dataTransformer(data) {\n    return {\n      username: data.username,\n      email: data.email,\n      password: data.password\n    };\n  };\n\n  var transformedData = dataTransformer(obj);\n  return axios.post('http://localhost:8000/api/auth/users/', transformedData).then(function (response) {\n    console.log(response);\n  })[\"catch\"](catchError);\n};","map":{"version":3,"sources":["/Users/bradras/Projects/justswap.it/utils/asyncActions.ts"],"names":["axios","catchError","getUserAccess","obj","dataTransformer","data","email","user","password","pass","transformedData","createToken","post","then","response","getUserInfo","token","console","log","get","params","headers","Authorization","access","postNewUser","username"],"mappings":";AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,SAASC,UAAT,QAA2B,SAA3B;AAEA,OAAO,IAAMC,aAAa,GAAG,SAAhBA,aAAgB,CAACC,GAAD,EAAS;AACpC,MAAMC,eAAe,GAAG,SAAlBA,eAAkB,CAACC,IAAD,EAAU;AAChC,WAAQ;AACNC,MAAAA,KAAK,EAAED,IAAI,CAACE,IADN;AAENC,MAAAA,QAAQ,EAAEH,IAAI,CAACI;AAFT,KAAR;AAID,GALD;;AAOA,MAAMC,eAAe,GAAGN,eAAe,CAACD,GAAD,CAAvC;;AAEA,MAAMQ,WAAW,GAAG,SAAdA,WAAc;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,6CACLX,KAAK,CAACY,IAAN,CAAW,2CAAX,EAAwDF,eAAxD,EACZG,IADY,CACP,UAAUC,QAAV,EAAoB;AACxB,qBAAOA,QAAQ,CAACT,IAAhB;AACD,aAHY,WAINJ,UAJM,CADK;;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAApB;;AAQA,MAAMc,WAAW,GAAG,SAAdA,WAAc,CAAOC,KAAP;AAAA;AAAA;AAAA;AAAA;AAClBC,YAAAA,OAAO,CAACC,GAAR,CAAY;AAACF,cAAAA,KAAK,EAALA;AAAD,aAAZ;AADkB;AAAA,6CAELhB,KAAK,CAACmB,GAAN,CAAU,yCAAV,EAAqD;AAChEC,cAAAA,MAAM,EAAEV,eADwD;AAEhEW,cAAAA,OAAO,EAAE;AACPC,gBAAAA,aAAa,mBAAYN,KAAK,CAACO,MAAlB;AADN;AAFuD,aAArD,EAMZV,IANY,CAMP,UAAUC,QAAV,EAAoB;AACxB,qBAAOA,QAAQ,CAACT,IAAhB;AACD,aARY,WASNJ,UATM,CAFK;;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAApB;;AAaAU,EAAAA,WAAW,GACVE,IADD,CACM,UAAAG,KAAK;AAAA,WAAID,WAAW,CAACC,KAAD,CAAf;AAAA,GADX,EAECH,IAFD,CAEM,UAAAN,IAAI,EAAI;AACZ,WAAOA,IAAP;AACD,GAJD;AAKD,CApCM;AAsCP,OAAO,IAAMiB,WAAW,GAAG,SAAdA,WAAc,CAACrB,GAAD,EAAS;AAClCc,EAAAA,OAAO,CAACC,GAAR,CAAY,UAAZ,EAAwB;AAACf,IAAAA,GAAG,EAAHA;AAAD,GAAxB;;AACA,MAAMC,eAAe,GAAG,SAAlBA,eAAkB,CAACC,IAAD,EAAU;AAChC,WAAQ;AACNoB,MAAAA,QAAQ,EAAEpB,IAAI,CAACoB,QADT;AAENnB,MAAAA,KAAK,EAAED,IAAI,CAACC,KAFN;AAGNE,MAAAA,QAAQ,EAAEH,IAAI,CAACG;AAHT,KAAR;AAKD,GAND;;AAQA,MAAME,eAAe,GAAGN,eAAe,CAACD,GAAD,CAAvC;AACA,SAAOH,KAAK,CAACY,IAAN,CAAW,uCAAX,EAAoDF,eAApD,EACNG,IADM,CACD,UAAUC,QAAV,EAAoB;AACxBG,IAAAA,OAAO,CAACC,GAAR,CAAYJ,QAAZ;AACD,GAHM,WAIAb,UAJA,CAAP;AAKD,CAhBM","sourcesContent":["import axios from 'axios'\nimport { catchError } from './utils'\n\nexport const getUserAccess = (obj) => {\n  const dataTransformer = (data) => {\n    return ({\n      email: data.user,\n      password: data.pass\n    })\n  }\n\n  const transformedData = dataTransformer(obj)\n\n  const createToken = async () => {\n    return await axios.post('http://localhost:8000/api/auth/jwt/create', transformedData)\n    .then(function (response) {\n      return response.data\n    })\n    .catch(catchError);\n  }\n\n  const getUserInfo = async (token) => {\n    console.log({token})\n    return await axios.get('http://localhost:8000/api/auth/users/me', {\n      params: transformedData,\n      headers: {\n        Authorization: `Bearer ${token.access}`\n      }\n    })\n    .then(function (response) {\n      return response.data\n    })\n    .catch(catchError);\n  }\n  createToken()\n  .then(token => getUserInfo(token))\n  .then(user => {\n    return user\n  })\n}\n\nexport const postNewUser = (obj) => {\n  console.log('Received', {obj})\n  const dataTransformer = (data) => {\n    return ({\n      username: data.username,\n      email: data.email,\n      password: data.password\n    })\n  }\n\n  const transformedData = dataTransformer(obj)\n  return axios.post('http://localhost:8000/api/auth/users/', transformedData)\n  .then(function (response) {\n    console.log(response);\n  })\n  .catch(catchError);\n}"]},"metadata":{},"sourceType":"module"}