{"ast":null,"code":"import { createAsyncThunk, createSlice, createAction } from '@reduxjs/toolkit';\nimport { getUserAccess, postNewUser } from '../utils/asyncActions'; // TYPESCRIPT BUILDER API EXAMPLE\n// createReducer(0, builder =>\n//   builder.addCase(increment, (state, action) => {\n//     // action is inferred correctly here\n//   })\n// )\n\nfunction withPayloadType() {\n  return t => ({\n    payload: t\n  });\n}\n\nconst usersLoading = createAction('users/loading');\nconst usersReceived = createAction('users/received');\nconst logUsers = createAction('users/log');\nconst setCurrentUser = createAction('users/setUser', withPayloadType());\nexport const registerUser = createAsyncThunk('users/createUser', async (obj, thunkAPI) => {\n  return await postNewUser(obj);\n});\nexport const loginUser = createAsyncThunk('users/login', async (obj, thunkAPI) => {\n  return await getUserAccess(obj);\n});\nconst usersSlice = createSlice({\n  name: 'users',\n  initialState: {\n    loading: 'idle',\n    currentUser: {},\n    usersArray: []\n  },\n  reducers: {\n    [setCurrentUser.type]: (state, action) => {\n      state.currentUser = action.payload;\n      console.log(state.currentUser);\n      return state;\n    },\n    [usersLoading.type]: (state, action) => {\n      if (state.loading === 'idle') {\n        state.loading = 'pending';\n      }\n    },\n    [usersReceived.type]: (state, action) => {\n      if (state.loading === 'pending') {\n        state.loading = 'idle';\n        state.usersArray = action.payload;\n      }\n    },\n    [logUsers.type]: (state, action) => {\n      console.log('Log Users:', state.usersArray);\n      return state;\n    }\n  },\n  extraReducers: builder => {\n    builder.addCase(loginUser.fulfilled, (state, action) => {\n      state.currentUser = action.payload;\n      return state;\n    });\n  }\n});\nconst {\n  actions,\n  reducer\n} = usersSlice;\nexport default reducer;","map":{"version":3,"sources":["/Users/bradras/Projects/justswap.it/reducers/usersSlice.ts"],"names":["createAsyncThunk","createSlice","createAction","getUserAccess","postNewUser","withPayloadType","t","payload","usersLoading","usersReceived","logUsers","setCurrentUser","registerUser","obj","thunkAPI","loginUser","usersSlice","name","initialState","loading","currentUser","usersArray","reducers","type","state","action","console","log","extraReducers","builder","addCase","fulfilled","actions","reducer"],"mappings":"AAAA,SACEA,gBADF,EAEEC,WAFF,EAGEC,YAHF,QAIO,kBAJP;AAKA,SAASC,aAAT,EAAwBC,WAAxB,QAA2C,uBAA3C,C,CAEA;AACA;AACA;AACA;AACA;AACA;;AAaA,SAASC,eAAT,GAA8B;AAC5B,SAAQC,CAAD,KAAW;AAAEC,IAAAA,OAAO,EAAED;AAAX,GAAX,CAAP;AACD;;AAED,MAAME,YAAY,GAAGN,YAAY,CAAC,eAAD,CAAjC;AACA,MAAMO,aAAa,GAAGP,YAAY,CAA2B,gBAA3B,CAAlC;AACA,MAAMQ,QAAQ,GAAGR,YAAY,CAAC,WAAD,CAA7B;AACA,MAAMS,cAAc,GAAIT,YAAY,CAAC,eAAD,EAAkBG,eAAe,EAAjC,CAApC;AAEA,OAAO,MAAMO,YAAY,GAAGZ,gBAAgB,CAAC,kBAAD,EAAqB,OAAOa,GAAP,EAAqBC,QAArB,KAAkC;AACjG,SAAO,MAAMV,WAAW,CAACS,GAAD,CAAxB;AACD,CAF2C,CAArC;AAIP,OAAO,MAAME,SAAS,GAAGf,gBAAgB,CAAC,aAAD,EAAgB,OAAOa,GAAP,EAAsBC,QAAtB,KAAmC;AAC1F,SAAO,MAAMX,aAAa,CAACU,GAAD,CAA1B;AACD,CAFwC,CAAlC;AAIP,MAAMG,UAAU,GAAGf,WAAW,CAAC;AAC7BgB,EAAAA,IAAI,EAAE,OADuB;AAE7BC,EAAAA,YAAY,EAAE;AACZC,IAAAA,OAAO,EAAE,MADG;AAEZC,IAAAA,WAAW,EAAE,EAFD;AAGZC,IAAAA,UAAU,EAAE;AAHA,GAFe;AAO7BC,EAAAA,QAAQ,EAAE;AACR,KAACX,cAAc,CAACY,IAAhB,GAAuB,CAACC,KAAD,EAAQC,MAAR,KAAmB;AACxCD,MAAAA,KAAK,CAACJ,WAAN,GAAoBK,MAAM,CAAClB,OAA3B;AACAmB,MAAAA,OAAO,CAACC,GAAR,CAAYH,KAAK,CAACJ,WAAlB;AACA,aAAOI,KAAP;AACD,KALO;AAMR,KAAChB,YAAY,CAACe,IAAd,GAAsB,CAACC,KAAD,EAAQC,MAAR,KAAmB;AACvC,UAAID,KAAK,CAACL,OAAN,KAAkB,MAAtB,EAA8B;AAC5BK,QAAAA,KAAK,CAACL,OAAN,GAAgB,SAAhB;AACD;AACF,KAVO;AAWR,KAACV,aAAa,CAACc,IAAf,GAAuB,CAACC,KAAD,EAAQC,MAAR,KAAmB;AACxC,UAAID,KAAK,CAACL,OAAN,KAAkB,SAAtB,EAAiC;AAC/BK,QAAAA,KAAK,CAACL,OAAN,GAAgB,MAAhB;AACAK,QAAAA,KAAK,CAACH,UAAN,GAAmBI,MAAM,CAAClB,OAA1B;AACD;AACF,KAhBO;AAiBR,KAACG,QAAQ,CAACa,IAAV,GAAkB,CAACC,KAAD,EAAQC,MAAR,KAAmB;AACnCC,MAAAA,OAAO,CAACC,GAAR,CAAY,YAAZ,EAA0BH,KAAK,CAACH,UAAhC;AACA,aAAOG,KAAP;AACD;AApBO,GAPmB;AA6B7BI,EAAAA,aAAa,EAAEC,OAAO,IAAI;AACxBA,IAAAA,OAAO,CAACC,OAAR,CAAgBf,SAAS,CAACgB,SAA1B,EAAqC,CAACP,KAAD,EAAQC,MAAR,KAAmB;AACtDD,MAAAA,KAAK,CAACJ,WAAN,GAAoBK,MAAM,CAAClB,OAA3B;AACA,aAAOiB,KAAP;AACD,KAHD;AAID;AAlC4B,CAAD,CAA9B;AAqCA,MAAM;AAAEQ,EAAAA,OAAF;AAAWC,EAAAA;AAAX,IAAuBjB,UAA7B;AACA,eAAeiB,OAAf","sourcesContent":["import {\n  createAsyncThunk,\n  createSlice,\n  createAction\n} from '@reduxjs/toolkit'\nimport { getUserAccess, postNewUser } from '../utils/asyncActions'\n\n// TYPESCRIPT BUILDER API EXAMPLE\n// createReducer(0, builder =>\n//   builder.addCase(increment, (state, action) => {\n//     // action is inferred correctly here\n//   })\n// )\n\nexport type UserObj = {\n  username: string,\n  email: string,\n  password: string\n}\n\nexport type LoginObj = {\n  user: string,\n  pass: string\n}\n\nfunction withPayloadType<T>() {\n  return (t: T) => ({ payload: t })\n}\n\nconst usersLoading = createAction('users/loading')\nconst usersReceived = createAction<string, 'users/received'>('users/received')\nconst logUsers = createAction('users/log')\nconst setCurrentUser =  createAction('users/setUser', withPayloadType<LoginObj>())\n\nexport const registerUser = createAsyncThunk('users/createUser', async (obj: UserObj, thunkAPI) => {\n  return await postNewUser(obj)\n})\n\nexport const loginUser = createAsyncThunk('users/login', async (obj: LoginObj, thunkAPI) => {\n  return await getUserAccess(obj)\n})\n\nconst usersSlice = createSlice({\n  name: 'users',\n  initialState: {\n    loading: 'idle',\n    currentUser: {},\n    usersArray: []\n  },\n  reducers: {\n    [setCurrentUser.type]: (state, action) => {\n      state.currentUser = action.payload\n      console.log(state.currentUser)\n      return state\n    },\n    [usersLoading.type] : (state, action) => {\n      if (state.loading === 'idle') {\n        state.loading = 'pending'\n      }\n    },\n    [usersReceived.type] : (state, action) => {\n      if (state.loading === 'pending') {\n        state.loading = 'idle'\n        state.usersArray = action.payload\n      }\n    },\n    [logUsers.type] : (state, action) => {\n      console.log('Log Users:', state.usersArray)\n      return state\n    }\n  },\n  extraReducers: builder => {\n    builder.addCase(loginUser.fulfilled, (state, action) => {\n      state.currentUser = action.payload\n      return state\n    })\n  }\n})\n\nconst { actions, reducer } = usersSlice\nexport default reducer"]},"metadata":{},"sourceType":"module"}